1702249097
waR3U4bTeM%3Abd45051806d3813f342b3dc93c93cf42-cff097ccabfe7adc4472c8a8e06dd738
s:22236:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6ImNmZjA5N2NjYWJmZTdhZGM0NDcyYzhhOGUwNmRkNzM4IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTg6IkltYWdlVmFsaWRhdG9yLnBocCI7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBwYXRoIjtzOjU1OiJ2ZW5kb3Ivc3ltZm9ueS92YWxpZGF0b3IvQ29uc3RyYWludHMvSW1hZ2VWYWxpZGF0b3IucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czo5MzkyOiI8P3BocAoKLyoKICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIFN5bWZvbnkgcGFja2FnZS4KICoKICogKGMpIEZhYmllbiBQb3RlbmNpZXIgPGZhYmllbkBzeW1mb255LmNvbT4KICoKICogRm9yIHRoZSBmdWxsIGNvcHlyaWdodCBhbmQgbGljZW5zZSBpbmZvcm1hdGlvbiwgcGxlYXNlIHZpZXcgdGhlIExJQ0VOU0UKICogZmlsZSB0aGF0IHdhcyBkaXN0cmlidXRlZCB3aXRoIHRoaXMgc291cmNlIGNvZGUuCiAqLwoKbmFtZXNwYWNlIFN5bWZvbnlcQ29tcG9uZW50XFZhbGlkYXRvclxDb25zdHJhaW50czsKCnVzZSBTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcQ29uc3RyYWludDsKdXNlIFN5bWZvbnlcQ29tcG9uZW50XFZhbGlkYXRvclxFeGNlcHRpb25cQ29uc3RyYWludERlZmluaXRpb25FeGNlcHRpb247CnVzZSBTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcRXhjZXB0aW9uXExvZ2ljRXhjZXB0aW9uOwp1c2UgU3ltZm9ueVxDb21wb25lbnRcVmFsaWRhdG9yXEV4Y2VwdGlvblxVbmV4cGVjdGVkVHlwZUV4Y2VwdGlvbjsKCi8qKgogKiBWYWxpZGF0ZXMgd2hldGhlciBhIHZhbHVlIGlzIGEgdmFsaWQgaW1hZ2UgZmlsZSBhbmQgaXMgdmFsaWQKICogYWdhaW5zdCBtaW5XaWR0aCwgbWF4V2lkdGgsIG1pbkhlaWdodCBhbmQgbWF4SGVpZ2h0IGNvbnN0cmFpbnRzLgogKgogKiBAYXV0aG9yIEJlbmphbWluIER1bGF1IDxiZW5qYW1pbi5kdWxhdUBnbWFpbC5jb20+CiAqIEBhdXRob3IgQmVybmhhcmQgU2NodXNzZWsgPGJzY2h1c3Nla0BnbWFpbC5jb20+CiAqLwpjbGFzcyBJbWFnZVZhbGlkYXRvciBleHRlbmRzIEZpbGVWYWxpZGF0b3IKewogICAgcHVibGljIGZ1bmN0aW9uIHZhbGlkYXRlKG1peGVkICR2YWx1ZSwgQ29uc3RyYWludCAkY29uc3RyYWludCkKICAgIHsKICAgICAgICBpZiAoISRjb25zdHJhaW50IGluc3RhbmNlb2YgSW1hZ2UpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFVuZXhwZWN0ZWRUeXBlRXhjZXB0aW9uKCRjb25zdHJhaW50LCBJbWFnZTo6Y2xhc3MpOwogICAgICAgIH0KCiAgICAgICAgJHZpb2xhdGlvbnMgPSBcY291bnQoJHRoaXMtPmNvbnRleHQtPmdldFZpb2xhdGlvbnMoKSk7CgogICAgICAgIHBhcmVudDo6dmFsaWRhdGUoJHZhbHVlLCAkY29uc3RyYWludCk7CgogICAgICAgICRmYWlsZWQgPSBcY291bnQoJHRoaXMtPmNvbnRleHQtPmdldFZpb2xhdGlvbnMoKSkgIT09ICR2aW9sYXRpb25zOwoKICAgICAgICBpZiAoJGZhaWxlZCB8fCBudWxsID09PSAkdmFsdWUgfHwgJycgPT09ICR2YWx1ZSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAobnVsbCA9PT0gJGNvbnN0cmFpbnQtPm1pbldpZHRoICYmIG51bGwgPT09ICRjb25zdHJhaW50LT5tYXhXaWR0aAogICAgICAgICAgICAmJiBudWxsID09PSAkY29uc3RyYWludC0+bWluSGVpZ2h0ICYmIG51bGwgPT09ICRjb25zdHJhaW50LT5tYXhIZWlnaHQKICAgICAgICAgICAgJiYgbnVsbCA9PT0gJGNvbnN0cmFpbnQtPm1pblBpeGVscyAmJiBudWxsID09PSAkY29uc3RyYWludC0+bWF4UGl4ZWxzCiAgICAgICAgICAgICYmIG51bGwgPT09ICRjb25zdHJhaW50LT5taW5SYXRpbyAmJiBudWxsID09PSAkY29uc3RyYWludC0+bWF4UmF0aW8KICAgICAgICAgICAgJiYgJGNvbnN0cmFpbnQtPmFsbG93U3F1YXJlICYmICRjb25zdHJhaW50LT5hbGxvd0xhbmRzY2FwZSAmJiAkY29uc3RyYWludC0+YWxsb3dQb3J0cmFpdAogICAgICAgICAgICAmJiAhJGNvbnN0cmFpbnQtPmRldGVjdENvcnJ1cHRlZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAkc2l6ZSA9IEBnZXRpbWFnZXNpemUoJHZhbHVlKTsKCiAgICAgICAgaWYgKGVtcHR5KCRzaXplKSB8fCAoMCA9PT0gJHNpemVbMF0pIHx8ICgwID09PSAkc2l6ZVsxXSkpIHsKICAgICAgICAgICAgJHRoaXMtPmNvbnRleHQtPmJ1aWxkVmlvbGF0aW9uKCRjb25zdHJhaW50LT5zaXplTm90RGV0ZWN0ZWRNZXNzYWdlKQogICAgICAgICAgICAgICAgLT5zZXRDb2RlKEltYWdlOjpTSVpFX05PVF9ERVRFQ1RFRF9FUlJPUikKICAgICAgICAgICAgICAgIC0+YWRkVmlvbGF0aW9uKCk7CgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAkd2lkdGggPSAkc2l6ZVswXTsKICAgICAgICAkaGVpZ2h0ID0gJHNpemVbMV07CgogICAgICAgIGlmICgkY29uc3RyYWludC0+bWluV2lkdGgpIHsKICAgICAgICAgICAgaWYgKCFjdHlwZV9kaWdpdCgoc3RyaW5nKSAkY29uc3RyYWludC0+bWluV2lkdGgpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29uc3RyYWludERlZmluaXRpb25FeGNlcHRpb24oc3ByaW50ZignIiVzIiBpcyBub3QgYSB2YWxpZCBtaW5pbXVtIHdpZHRoLicsICRjb25zdHJhaW50LT5taW5XaWR0aCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHdpZHRoIDwgJGNvbnN0cmFpbnQtPm1pbldpZHRoKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+Y29udGV4dC0+YnVpbGRWaW9sYXRpb24oJGNvbnN0cmFpbnQtPm1pbldpZHRoTWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgd2lkdGggfX0nLCAkd2lkdGgpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IG1pbl93aWR0aCB9fScsICRjb25zdHJhaW50LT5taW5XaWR0aCkKICAgICAgICAgICAgICAgICAgICAtPnNldENvZGUoSW1hZ2U6OlRPT19OQVJST1dfRVJST1IpCiAgICAgICAgICAgICAgICAgICAgLT5hZGRWaW9sYXRpb24oKTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICgkY29uc3RyYWludC0+bWF4V2lkdGgpIHsKICAgICAgICAgICAgaWYgKCFjdHlwZV9kaWdpdCgoc3RyaW5nKSAkY29uc3RyYWludC0+bWF4V2lkdGgpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29uc3RyYWludERlZmluaXRpb25FeGNlcHRpb24oc3ByaW50ZignIiVzIiBpcyBub3QgYSB2YWxpZCBtYXhpbXVtIHdpZHRoLicsICRjb25zdHJhaW50LT5tYXhXaWR0aCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHdpZHRoID4gJGNvbnN0cmFpbnQtPm1heFdpZHRoKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+Y29udGV4dC0+YnVpbGRWaW9sYXRpb24oJGNvbnN0cmFpbnQtPm1heFdpZHRoTWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgd2lkdGggfX0nLCAkd2lkdGgpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IG1heF93aWR0aCB9fScsICRjb25zdHJhaW50LT5tYXhXaWR0aCkKICAgICAgICAgICAgICAgICAgICAtPnNldENvZGUoSW1hZ2U6OlRPT19XSURFX0VSUk9SKQogICAgICAgICAgICAgICAgICAgIC0+YWRkVmlvbGF0aW9uKCk7CgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoJGNvbnN0cmFpbnQtPm1pbkhlaWdodCkgewogICAgICAgICAgICBpZiAoIWN0eXBlX2RpZ2l0KChzdHJpbmcpICRjb25zdHJhaW50LT5taW5IZWlnaHQpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29uc3RyYWludERlZmluaXRpb25FeGNlcHRpb24oc3ByaW50ZignIiVzIiBpcyBub3QgYSB2YWxpZCBtaW5pbXVtIGhlaWdodC4nLCAkY29uc3RyYWludC0+bWluSGVpZ2h0KSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgkaGVpZ2h0IDwgJGNvbnN0cmFpbnQtPm1pbkhlaWdodCkgewogICAgICAgICAgICAgICAgJHRoaXMtPmNvbnRleHQtPmJ1aWxkVmlvbGF0aW9uKCRjb25zdHJhaW50LT5taW5IZWlnaHRNZXNzYWdlKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBoZWlnaHQgfX0nLCAkaGVpZ2h0KQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBtaW5faGVpZ2h0IH19JywgJGNvbnN0cmFpbnQtPm1pbkhlaWdodCkKICAgICAgICAgICAgICAgICAgICAtPnNldENvZGUoSW1hZ2U6OlRPT19MT1dfRVJST1IpCiAgICAgICAgICAgICAgICAgICAgLT5hZGRWaW9sYXRpb24oKTsKCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICgkY29uc3RyYWludC0+bWF4SGVpZ2h0KSB7CiAgICAgICAgICAgIGlmICghY3R5cGVfZGlnaXQoKHN0cmluZykgJGNvbnN0cmFpbnQtPm1heEhlaWdodCkpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25zdHJhaW50RGVmaW5pdGlvbkV4Y2VwdGlvbihzcHJpbnRmKCciJXMiIGlzIG5vdCBhIHZhbGlkIG1heGltdW0gaGVpZ2h0LicsICRjb25zdHJhaW50LT5tYXhIZWlnaHQpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCRoZWlnaHQgPiAkY29uc3RyYWludC0+bWF4SGVpZ2h0KSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+Y29udGV4dC0+YnVpbGRWaW9sYXRpb24oJGNvbnN0cmFpbnQtPm1heEhlaWdodE1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IGhlaWdodCB9fScsICRoZWlnaHQpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IG1heF9oZWlnaHQgfX0nLCAkY29uc3RyYWludC0+bWF4SGVpZ2h0KQogICAgICAgICAgICAgICAgICAgIC0+c2V0Q29kZShJbWFnZTo6VE9PX0hJR0hfRVJST1IpCiAgICAgICAgICAgICAgICAgICAgLT5hZGRWaW9sYXRpb24oKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJHBpeGVscyA9ICR3aWR0aCAqICRoZWlnaHQ7CgogICAgICAgIGlmIChudWxsICE9PSAkY29uc3RyYWludC0+bWluUGl4ZWxzKSB7CiAgICAgICAgICAgIGlmICghY3R5cGVfZGlnaXQoKHN0cmluZykgJGNvbnN0cmFpbnQtPm1pblBpeGVscykpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25zdHJhaW50RGVmaW5pdGlvbkV4Y2VwdGlvbihzcHJpbnRmKCciJXMiIGlzIG5vdCBhIHZhbGlkIG1pbmltdW0gYW1vdW50IG9mIHBpeGVscy4nLCAkY29uc3RyYWludC0+bWluUGl4ZWxzKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgkcGl4ZWxzIDwgJGNvbnN0cmFpbnQtPm1pblBpeGVscykgewogICAgICAgICAgICAgICAgJHRoaXMtPmNvbnRleHQtPmJ1aWxkVmlvbGF0aW9uKCRjb25zdHJhaW50LT5taW5QaXhlbHNNZXNzYWdlKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBwaXhlbHMgfX0nLCAkcGl4ZWxzKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBtaW5fcGl4ZWxzIH19JywgJGNvbnN0cmFpbnQtPm1pblBpeGVscykKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgaGVpZ2h0IH19JywgJGhlaWdodCkKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgd2lkdGggfX0nLCAkd2lkdGgpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRDb2RlKEltYWdlOjpUT09fRkVXX1BJWEVMX0VSUk9SKQogICAgICAgICAgICAgICAgICAgIC0+YWRkVmlvbGF0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChudWxsICE9PSAkY29uc3RyYWludC0+bWF4UGl4ZWxzKSB7CiAgICAgICAgICAgIGlmICghY3R5cGVfZGlnaXQoKHN0cmluZykgJGNvbnN0cmFpbnQtPm1heFBpeGVscykpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBDb25zdHJhaW50RGVmaW5pdGlvbkV4Y2VwdGlvbihzcHJpbnRmKCciJXMiIGlzIG5vdCBhIHZhbGlkIG1heGltdW0gYW1vdW50IG9mIHBpeGVscy4nLCAkY29uc3RyYWludC0+bWF4UGl4ZWxzKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgkcGl4ZWxzID4gJGNvbnN0cmFpbnQtPm1heFBpeGVscykgewogICAgICAgICAgICAgICAgJHRoaXMtPmNvbnRleHQtPmJ1aWxkVmlvbGF0aW9uKCRjb25zdHJhaW50LT5tYXhQaXhlbHNNZXNzYWdlKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBwaXhlbHMgfX0nLCAkcGl4ZWxzKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBtYXhfcGl4ZWxzIH19JywgJGNvbnN0cmFpbnQtPm1heFBpeGVscykKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgaGVpZ2h0IH19JywgJGhlaWdodCkKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgd2lkdGggfX0nLCAkd2lkdGgpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRDb2RlKEltYWdlOjpUT09fTUFOWV9QSVhFTF9FUlJPUikKICAgICAgICAgICAgICAgICAgICAtPmFkZFZpb2xhdGlvbigpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkcmF0aW8gPSByb3VuZCgkd2lkdGggLyAkaGVpZ2h0LCAyKTsKCiAgICAgICAgaWYgKG51bGwgIT09ICRjb25zdHJhaW50LT5taW5SYXRpbykgewogICAgICAgICAgICBpZiAoIWlzX251bWVyaWMoKHN0cmluZykgJGNvbnN0cmFpbnQtPm1pblJhdGlvKSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IENvbnN0cmFpbnREZWZpbml0aW9uRXhjZXB0aW9uKHNwcmludGYoJyIlcyIgaXMgbm90IGEgdmFsaWQgbWluaW11bSByYXRpby4nLCAkY29uc3RyYWludC0+bWluUmF0aW8pKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCRyYXRpbyA8IHJvdW5kKCRjb25zdHJhaW50LT5taW5SYXRpbywgMikpIHsKICAgICAgICAgICAgICAgICR0aGlzLT5jb250ZXh0LT5idWlsZFZpb2xhdGlvbigkY29uc3RyYWludC0+bWluUmF0aW9NZXNzYWdlKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyByYXRpbyB9fScsICRyYXRpbykKICAgICAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgbWluX3JhdGlvIH19Jywgcm91bmQoJGNvbnN0cmFpbnQtPm1pblJhdGlvLCAyKSkKICAgICAgICAgICAgICAgICAgICAtPnNldENvZGUoSW1hZ2U6OlJBVElPX1RPT19TTUFMTF9FUlJPUikKICAgICAgICAgICAgICAgICAgICAtPmFkZFZpb2xhdGlvbigpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAobnVsbCAhPT0gJGNvbnN0cmFpbnQtPm1heFJhdGlvKSB7CiAgICAgICAgICAgIGlmICghaXNfbnVtZXJpYygoc3RyaW5nKSAkY29uc3RyYWludC0+bWF4UmF0aW8pKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29uc3RyYWludERlZmluaXRpb25FeGNlcHRpb24oc3ByaW50ZignIiVzIiBpcyBub3QgYSB2YWxpZCBtYXhpbXVtIHJhdGlvLicsICRjb25zdHJhaW50LT5tYXhSYXRpbykpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoJHJhdGlvID4gcm91bmQoJGNvbnN0cmFpbnQtPm1heFJhdGlvLCAyKSkgewogICAgICAgICAgICAgICAgJHRoaXMtPmNvbnRleHQtPmJ1aWxkVmlvbGF0aW9uKCRjb25zdHJhaW50LT5tYXhSYXRpb01lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgLT5zZXRQYXJhbWV0ZXIoJ3t7IHJhdGlvIH19JywgJHJhdGlvKQogICAgICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBtYXhfcmF0aW8gfX0nLCByb3VuZCgkY29uc3RyYWludC0+bWF4UmF0aW8sIDIpKQogICAgICAgICAgICAgICAgICAgIC0+c2V0Q29kZShJbWFnZTo6UkFUSU9fVE9PX0JJR19FUlJPUikKICAgICAgICAgICAgICAgICAgICAtPmFkZFZpb2xhdGlvbigpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoISRjb25zdHJhaW50LT5hbGxvd1NxdWFyZSAmJiAkd2lkdGggPT0gJGhlaWdodCkgewogICAgICAgICAgICAkdGhpcy0+Y29udGV4dC0+YnVpbGRWaW9sYXRpb24oJGNvbnN0cmFpbnQtPmFsbG93U3F1YXJlTWVzc2FnZSkKICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyB3aWR0aCB9fScsICR3aWR0aCkKICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBoZWlnaHQgfX0nLCAkaGVpZ2h0KQogICAgICAgICAgICAgICAgLT5zZXRDb2RlKEltYWdlOjpTUVVBUkVfTk9UX0FMTE9XRURfRVJST1IpCiAgICAgICAgICAgICAgICAtPmFkZFZpb2xhdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCEkY29uc3RyYWludC0+YWxsb3dMYW5kc2NhcGUgJiYgJHdpZHRoID4gJGhlaWdodCkgewogICAgICAgICAgICAkdGhpcy0+Y29udGV4dC0+YnVpbGRWaW9sYXRpb24oJGNvbnN0cmFpbnQtPmFsbG93TGFuZHNjYXBlTWVzc2FnZSkKICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyB3aWR0aCB9fScsICR3aWR0aCkKICAgICAgICAgICAgICAgIC0+c2V0UGFyYW1ldGVyKCd7eyBoZWlnaHQgfX0nLCAkaGVpZ2h0KQogICAgICAgICAgICAgICAgLT5zZXRDb2RlKEltYWdlOjpMQU5EU0NBUEVfTk9UX0FMTE9XRURfRVJST1IpCiAgICAgICAgICAgICAgICAtPmFkZFZpb2xhdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCEkY29uc3RyYWludC0+YWxsb3dQb3J0cmFpdCAmJiAkd2lkdGggPCAkaGVpZ2h0KSB7CiAgICAgICAgICAgICR0aGlzLT5jb250ZXh0LT5idWlsZFZpb2xhdGlvbigkY29uc3RyYWludC0+YWxsb3dQb3J0cmFpdE1lc3NhZ2UpCiAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgd2lkdGggfX0nLCAkd2lkdGgpCiAgICAgICAgICAgICAgICAtPnNldFBhcmFtZXRlcigne3sgaGVpZ2h0IH19JywgJGhlaWdodCkKICAgICAgICAgICAgICAgIC0+c2V0Q29kZShJbWFnZTo6UE9SVFJBSVRfTk9UX0FMTE9XRURfRVJST1IpCiAgICAgICAgICAgICAgICAtPmFkZFZpb2xhdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCRjb25zdHJhaW50LT5kZXRlY3RDb3JydXB0ZWQpIHsKICAgICAgICAgICAgaWYgKCFcZnVuY3Rpb25fZXhpc3RzKCdpbWFnZWNyZWF0ZWZyb21zdHJpbmcnKSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IExvZ2ljRXhjZXB0aW9uKCdDb3JydXB0ZWQgaW1hZ2VzIGRldGVjdGlvbiByZXF1aXJlcyBpbnN0YWxsZWQgYW5kIGVuYWJsZWQgR0QgZXh0ZW5zaW9uLicpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkcmVzb3VyY2UgPSBAaW1hZ2VjcmVhdGVmcm9tc3RyaW5nKGZpbGVfZ2V0X2NvbnRlbnRzKCR2YWx1ZSkpOwoKICAgICAgICAgICAgaWYgKGZhbHNlID09PSAkcmVzb3VyY2UpIHsKICAgICAgICAgICAgICAgICR0aGlzLT5jb250ZXh0LT5idWlsZFZpb2xhdGlvbigkY29uc3RyYWludC0+Y29ycnVwdGVkTWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAtPnNldENvZGUoSW1hZ2U6OkNPUlJVUFRFRF9JTUFHRV9FUlJPUikKICAgICAgICAgICAgICAgICAgICAtPmFkZFZpb2xhdGlvbigpOwoKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaW1hZ2VkZXN0cm95KCRyZXNvdXJjZSk7CiAgICAgICAgfQogICAgfQp9CiI7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lc3BhY2VzIjthOjE6e3M6NDA6IlxTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcQ29uc3RyYWludHMiO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czo0MDoiXFN5bWZvbnlcQ29tcG9uZW50XFZhbGlkYXRvclxDb25zdHJhaW50cyI7czozNjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBuYW1lIjtzOjExOiJDb25zdHJhaW50cyI7fX1zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGluY2x1ZGVzIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGZ1bmN0aW9ucyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjb25zdGFudHMiO2E6MDp7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY2xhc3NlcyI7YToxOntzOjU1OiJcU3ltZm9ueVxDb21wb25lbnRcVmFsaWRhdG9yXENvbnN0cmFpbnRzXEltYWdlVmFsaWRhdG9yIjtPOjM1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXyI6MTM6e3M6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBmcXNlbiI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjU1OiJcU3ltZm9ueVxDb21wb25lbnRcVmFsaWRhdG9yXENvbnN0cmFpbnRzXEltYWdlVmFsaWRhdG9yIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6MTQ6IkltYWdlVmFsaWRhdG9yIjt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGRvY0Jsb2NrIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2siOjc6e3M6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAc3VtbWFyeSI7czoxMjU6IlZhbGlkYXRlcyB3aGV0aGVyIGEgdmFsdWUgaXMgYSB2YWxpZCBpbWFnZSBmaWxlIGFuZCBpcyB2YWxpZAphZ2FpbnN0IG1pbldpZHRoLCBtYXhXaWR0aCwgbWluSGVpZ2h0IGFuZCBtYXhIZWlnaHQgY29uc3RyYWludHMuIjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGRlc2NyaXB0aW9uIjtPOjQ1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24iOjI6e3M6NTk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AYm9keVRlbXBsYXRlIjtzOjA6IiI7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9ja1xEZXNjcmlwdGlvbgB0YWdzIjthOjA6e319czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawB0YWdzIjthOjI6e2k6MDtPOjQ1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcVGFnc1xBdXRob3IiOjQ6e3M6NzoiACoAbmFtZSI7czo2OiJhdXRob3IiO3M6MTQ6IgAqAGRlc2NyaXB0aW9uIjtOO3M6NTc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcVGFnc1xBdXRob3IAYXV0aG9yTmFtZSI7czoxNDoiQmVuamFtaW4gRHVsYXUiO3M6NTg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcVGFnc1xBdXRob3IAYXV0aG9yRW1haWwiO3M6MjQ6ImJlbmphbWluLmR1bGF1QGdtYWlsLmNvbSI7fWk6MTtPOjQ1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcVGFnc1xBdXRob3IiOjQ6e3M6NzoiACoAbmFtZSI7czo2OiJhdXRob3IiO3M6MTQ6IgAqAGRlc2NyaXB0aW9uIjtOO3M6NTc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcVGFnc1xBdXRob3IAYXV0aG9yTmFtZSI7czoxNzoiQmVybmhhcmQgU2NodXNzZWsiO3M6NTg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcVGFnc1xBdXRob3IAYXV0aG9yRW1haWwiO3M6MTk6ImJzY2h1c3Nla0BnbWFpbC5jb20iO319czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBjb250ZXh0IjtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dCI6Mjp7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZSI7czozOToiU3ltZm9ueVxDb21wb25lbnRcVmFsaWRhdG9yXENvbnN0cmFpbnRzIjtzOjU2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXENvbnRleHQAbmFtZXNwYWNlQWxpYXNlcyI7YTo0OntzOjEwOiJDb25zdHJhaW50IjtzOjM4OiJTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcQ29uc3RyYWludCI7czoyOToiQ29uc3RyYWludERlZmluaXRpb25FeGNlcHRpb24iO3M6Njc6IlN5bWZvbnlcQ29tcG9uZW50XFZhbGlkYXRvclxFeGNlcHRpb25cQ29uc3RyYWludERlZmluaXRpb25FeGNlcHRpb24iO3M6MTQ6IkxvZ2ljRXhjZXB0aW9uIjtzOjUyOiJTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcRXhjZXB0aW9uXExvZ2ljRXhjZXB0aW9uIjtzOjIzOiJVbmV4cGVjdGVkVHlwZUV4Y2VwdGlvbiI7czo2MToiU3ltZm9ueVxDb21wb25lbnRcVmFsaWRhdG9yXEV4Y2VwdGlvblxVbmV4cGVjdGVkVHlwZUV4Y2VwdGlvbiI7fX1zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGxvY2F0aW9uIjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZVN0YXJ0IjtiOjA7czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBpc1RlbXBsYXRlRW5kIjtiOjA7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBhYnN0cmFjdCI7YjowO3M6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBmaW5hbCI7YjowO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBwYXJlbnQiO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czo1NDoiXFN5bWZvbnlcQ29tcG9uZW50XFZhbGlkYXRvclxDb25zdHJhaW50c1xGaWxlVmFsaWRhdG9yIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6MTM6IkZpbGVWYWxpZGF0b3IiO31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AaW1wbGVtZW50cyI7YTowOnt9czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGNvbnN0YW50cyI7YTowOnt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAHByb3BlcnRpZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBtZXRob2RzIjthOjE6e3M6Njc6IlxTeW1mb255XENvbXBvbmVudFxWYWxpZGF0b3JcQ29uc3RyYWludHNcSW1hZ2VWYWxpZGF0b3I6OnZhbGlkYXRlKCkiO086MzU6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kIjoxMjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGRvY0Jsb2NrIjtOO3M6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABmcXNlbiI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjY3OiJcU3ltZm9ueVxDb21wb25lbnRcVmFsaWRhdG9yXENvbnN0cmFpbnRzXEltYWdlVmFsaWRhdG9yOjp2YWxpZGF0ZSgpIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6ODoidmFsaWRhdGUiO31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYWJzdHJhY3QiO2I6MDtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZmluYWwiO2I6MDtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAc3RhdGljIjtiOjA7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHZpc2liaWxpdHkiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eSI6MTp7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eQB2aXNpYmlsaXR5IjtzOjY6InB1YmxpYyI7fXM6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhcmd1bWVudHMiO2E6Mjp7aTowO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQiOjU6e3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AG5hbWUiO3M6NToidmFsdWUiO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AHR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xNaXhlZF8iOjA6e31zOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABkZWZhdWx0IjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGJ5UmVmZXJlbmNlIjtiOjA7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAaXNWYXJpYWRpYyI7YjowO31pOjE7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudCI6NTp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAbmFtZSI7czoxMDoiY29uc3RyYWludCI7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAdHlwZSI7TzozODoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXE9iamVjdF8iOjE6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcT2JqZWN0XwBmcXNlbiI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjM5OiJcU3ltZm9ueVxDb21wb25lbnRcVmFsaWRhdG9yXENvbnN0cmFpbnQiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czoxMDoiQ29uc3RyYWludCI7fX1zOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABkZWZhdWx0IjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGJ5UmVmZXJlbmNlIjtiOjA7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAaXNWYXJpYWRpYyI7YjowO319czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aToyODtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTowO31zOjQ4OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZW5kTG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjIzMztzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTowO31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAcmV0dXJuVHlwZSI7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXE1peGVkXyI6MDp7fXM6NTc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABoYXNSZXR1cm5CeVJlZmVyZW5jZSI7YjowO3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABtZXRhZGF0YSI7YTowOnt9fX1zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AdXNlZFRyYWl0cyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aToyNjtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTowO31zOjQ4OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AZW5kTG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjIzNDtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTowO31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AbWV0YWRhdGEiO2E6MDp7fX19czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbnRlcmZhY2VzIjthOjA6e31zOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHRyYWl0cyI7YTowOnt9czo0MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBlbnVtcyI7YTowOnt9czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBtZXRhZGF0YSI7YTowOnt9fQ==";